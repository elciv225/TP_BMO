<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<!-- Interface de Réunion Moderne - Style Teams/Meet -->
<VBox fx:id="reunionContainer"
      styleClass="reunion-container"
      maxHeight="-Infinity"
      maxWidth="-Infinity"
      minHeight="-Infinity"
      minWidth="-Infinity"
      prefHeight="800.0"
      prefWidth="1200.0"
      stylesheets="@styles/main.css"
      xmlns="http://javafx.com/javafx/23.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="client.ReunionController">

    <!-- En-tête moderne avec statut de connexion -->
    <HBox styleClass="reunion-header"
          alignment="CENTER_LEFT"
          spacing="20.0"
          prefHeight="70.0">

        <!-- Indicateur de statut -->
        <HBox alignment="CENTER_LEFT" spacing="10.0">
            <Label text="🔴"
                   fx:id="statusIndicator"
                   styleClass="status-dot"
                   managed="true"/>
            <Label fx:id="connectionStatus"
                   styleClass="connectionStatus, connected"
                   text="🎥 Réunion en cours"/>
        </HBox>

        <!-- Espacement flexible -->
        <Region HBox.hgrow="ALWAYS" />

        <!-- Informations de réunion -->
        <HBox alignment="CENTER_RIGHT" spacing="15.0">
            <Label text="👥 Participants: 1"
                   fx:id="participantCount"
                   styleClass="header-info-text"/>
            <Label text="⏱️ 00:15:32"
                   fx:id="meetingDuration"
                   styleClass="header-info-text"/>
        </HBox>
    </HBox>

    <!-- Zone principale de contenu -->
    <HBox VBox.vgrow="ALWAYS" spacing="0">
        <VBox HBox.hgrow="ALWAYS" spacing="0">

            <!-- Zone de messages avec scroll moderne -->
            <ScrollPane fx:id="messageScrollPane"
                        fitToWidth="true"
                        VBox.vgrow="ALWAYS"
                        styleClass="scroll-pane, message-area-scroll-pane">
                <content>
                    <VBox fx:id="messageArea"
                          styleClass="messageArea">
                        <!-- Message de bienvenue -->
                        <VBox alignment="CENTER" spacing="10.0" styleClass="chat-welcome-message-container">
                            <Label text="🎉" styleClass="chat-welcome-icon"/>
                            <Label text="Bienvenue dans votre réunion !"
                                   styleClass="chat-welcome-title"/>
                            <Label text="Commencez à discuter avec vos participants"
                                   styleClass="chat-welcome-subtitle"/>
                        </VBox>
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Zone d'invitation (visible pour l'organisateur) -->
            <HBox fx:id="invitationArea"
                  alignment="CENTER_LEFT"
                  spacing="15.0"
                  styleClass="invitation-area"
                  managed="false"
                  visible="false"
                  prefHeight="80.0">
                <!-- Padding removed, should be handled by .invitation-area CSS -->

                <Label text="👥" styleClass="invitation-area-icon"/>
                <Label text="Inviter un participant:"
                       styleClass="field-label, invitation-area-label"/>

                <TextField fx:id="inviteUserField"
                          styleClass="invite-user-field"
                          prefHeight="40.0"
                          prefWidth="300.0"
                          promptText="Nom d'utilisateur à inviter"/>

                <Button fx:id="inviteButton"
                        styleClass="invite-button"
                        text="✉️ Inviter"
                        prefHeight="40.0"
                        minWidth="100.0"/>
            </HBox>

            <!-- Zone de saisie moderne style Teams -->
            <HBox fx:id="inputArea"
                  alignment="CENTER_LEFT"
                  spacing="15.0"
                  prefHeight="90.0"
                  styleClass="chat-input-container">
                <!-- Padding removed, should be handled by .chat-input-container CSS -->

                <!-- Champ de saisie avec style moderne -->
                <TextField fx:id="messageInput"
                          prefHeight="50.0"
                          HBox.hgrow="ALWAYS"
                          promptText="💬 Tapez votre message ici..."
                          styleClass="chat-input-field"/>

                <!-- Boutons d'action modernes -->
                <HBox spacing="10.0" alignment="CENTER">
                    <!-- Bouton emoji (futur) -->
                    <Button text="😊"
                            styleClass="chat-emoji-button"
                            managed="false"
                            visible="false"/>

                    <!-- Bouton d'envoi moderne -->
                    <Button fx:id="sendButton"
                            text="📤"
                            styleClass="chat-send-button"
                            prefWidth="55.0"
                            prefHeight="55.0"
                            minWidth="55.0"
                            maxWidth="55.0"/>
                </HBox>
            </HBox>
        </VBox>

        <!-- Panneau latéral (futur - participants) -->
        <VBox fx:id="sidePanel"
              prefWidth="320.0"
              styleClass="side-panel-container"
              managed="false"
              visible="false">
            <!-- Padding removed, handled by .side-panel-container CSS -->

            <!-- En-tête du panneau -->
            <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="side-panel-header">
                <Label text="👥" styleClass="side-panel-header-icon"/>
                <Label text="Participants"
                       styleClass="side-panel-title"/>
            </HBox>

            <!-- Liste des participants (à implémenter) -->
            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="scroll-pane, side-panel-scroll-pane">
                <content>
                    <VBox fx:id="participantsList" spacing="10.0" styleClass="participants-list-container">
                        <!-- Les participants seront ajoutés dynamiquement -->
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Actions du panneau -->
            <VBox spacing="10.0" styleClass="side-panel-actions-container">
                <Button text="🔗 Copier le lien"
                        styleClass="button-outline"
                        prefWidth="280.0"/>
                <Button text="⚙️ Paramètres"
                        styleClass="button-secondary-outline"
                        prefWidth="280.0"/>
            </VBox>
        </VBox>
    </HBox>

    <!-- Barre d'outils inférieure (futur) -->
    <HBox fx:id="toolBar"
          alignment="CENTER"
          spacing="20.0"
          prefHeight="70.0"
          style="-fx-background-color: rgba(52, 58, 64, 0.95); -fx-border-color: rgba(0,0,0,0.2); -fx-border-width: 1 0 0 0;"
          managed="false"
          visible="false">

        <padding>
            <Insets top="15.0" bottom="15.0" left="30.0" right="30.0"/>
        </padding>

        <!-- Boutons de contrôle -->
        <Button text="🎤"
                style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-border-radius: 50%; -fx-background-radius: 50%; -fx-font-size: 1.2em;"
                prefWidth="50.0"
                prefHeight="50.0"/>

        <Button text="📹"
                style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-border-radius: 50%; -fx-background-radius: 50%; -fx-font-size: 1.2em;"
                prefWidth="50.0"
                prefHeight="50.0"/>

        <Button text="📺"
                style="-fx-background-color: #17a2b8; -fx-text-fill: white; -fx-border-radius: 50%; -fx-background-radius: 50%; -fx-font-size: 1.2em;"
                prefWidth="50.0"
                prefHeight="50.0"/>

        <!-- Espacement -->
        <Region HBox.hgrow="ALWAYS"/>

        <!-- Bouton quitter -->
        <Button text="📞 Quitter"
                style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-border-radius: 25; -fx-background-radius: 25; -fx-font-weight: 600; -fx-padding: 12 25;"
                prefHeight="45.0"/>
    </HBox>

</VBox>