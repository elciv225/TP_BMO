<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<!-- Interface de Réunion Moderne - Style Teams/Meet -->
<VBox fx:id="reunionContainer"
      styleClass="reunion-container"
      maxHeight="-Infinity"
      maxWidth="-Infinity"
      minHeight="-Infinity"
      minWidth="-Infinity"
      prefHeight="800.0"
      prefWidth="1200.0"
      stylesheets="@styles/main.css"
      xmlns="http://javafx.com/javafx/23.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="client.ReunionController">

    <!-- En-tête moderne avec statut de connexion -->
    <HBox styleClass="reunion-header"
          alignment="CENTER_LEFT"
          spacing="20.0"
          prefHeight="70.0"
          style="-fx-background-color: linear-gradient(135deg, #5b5fc7 0%, #667eea 100%); -fx-padding: 0 30;">

        <!-- Indicateur de statut -->
        <HBox alignment="CENTER_LEFT" spacing="10.0">
            <Label text="🔴"
                   fx:id="statusIndicator"
                   style="-fx-font-size: 1.5em;"
                   managed="true"/>
            <Label fx:id="connectionStatus"
                   styleClass="connectionStatus, connected"
                   text="🎥 Réunion en cours"
                   style="-fx-font-size: 1.2em; -fx-font-weight: 600; -fx-text-fill: white;"/>
        </HBox>

        <!-- Espacement flexible -->
        <Region HBox.hgrow="ALWAYS" />

        <!-- Informations de réunion -->
        <HBox alignment="CENTER_RIGHT" spacing="15.0">
            <Label text="👥 Participants: 1"
                   fx:id="participantCount"
                   style="-fx-text-fill: rgba(255,255,255,0.9); -fx-font-size: 1em;"/>
            <Label text="⏱️ 00:15:32"
                   fx:id="meetingDuration"
                   style="-fx-text-fill: rgba(255,255,255,0.9); -fx-font-size: 1em;"/>
        </HBox>
    </HBox>

    <!-- Zone principale de contenu -->
    <HBox VBox.vgrow="ALWAYS" spacing="0">

        <!-- Zone de chat principale -->
        <VBox HBox.hgrow="ALWAYS" spacing="0">

            <!-- Zone de messages avec scroll moderne -->
            <ScrollPane fitToWidth="true"
                       VBox.vgrow="ALWAYS"
                       styleClass="scroll-pane"
                       style="-fx-background-color: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%);">
                <content>
                    <VBox fx:id="messageArea"
                          styleClass="messageArea"
                          spacing="12.0"
                          style="-fx-background-color: transparent;">
                        <padding>
                            <Insets top="20.0" bottom="20.0" left="20.0" right="20.0"/>
                        </padding>

                        <!-- Message de bienvenue -->
                        <VBox alignment="CENTER" spacing="10.0" style="-fx-padding: 20 0;">
                            <Label text="🎉" style="-fx-font-size: 3em;"/>
                            <Label text="Bienvenue dans votre réunion !"
                                   style="-fx-font-size: 1.4em; -fx-font-weight: 600; -fx-text-fill: #5b5fc7;"/>
                            <Label text="Commencez à discuter avec vos participants"
                                   style="-fx-font-size: 1em; -fx-text-fill: #6c757d;"/>
                        </VBox>
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Zone d'invitation (visible pour l'organisateur) -->
            <HBox fx:id="invitationArea"
                  alignment="CENTER_LEFT"
                  spacing="15.0"
                  styleClass="invitation-area"
                  managed="false"
                  visible="false"
                  prefHeight="80.0">
                <padding>
                    <Insets top="15.0" bottom="15.0" left="25.0" right="25.0"/>
                </padding>

                <Label text="👥" style="-fx-font-size: 1.5em;"/>
                <Label text="Inviter un participant:"
                       styleClass="field-label"
                       style="-fx-font-weight: 600; -fx-font-size: 1.1em;"/>

                <TextField fx:id="inviteUserField"
                          styleClass="invite-user-field"
                          prefHeight="40.0"
                          prefWidth="300.0"
                          promptText="Nom d'utilisateur à inviter"/>

                <Button fx:id="inviteButton"
                        styleClass="invite-button"
                        text="✉️ Inviter"
                        prefHeight="40.0"
                        minWidth="100.0"/>
            </HBox>

            <!-- Zone de saisie moderne style Teams -->
            <HBox fx:id="inputArea"
                  alignment="CENTER_LEFT"
                  spacing="15.0"
                  prefHeight="90.0"
                  style="-fx-background-color: rgba(255, 255, 255, 0.95); -fx-border-color: rgba(0,0,0,0.1); -fx-border-width: 1 0 0 0;">
                <padding>
                    <Insets top="20.0" bottom="20.0" left="25.0" right="25.0"/>
                </padding>

                <!-- Champ de saisie avec style moderne -->
                <TextField fx:id="messageInput"
                          prefHeight="50.0"
                          HBox.hgrow="ALWAYS"
                          promptText="💬 Tapez votre message ici..."
                          style="-fx-background-color: white; -fx-border-color: #dee2e6; -fx-border-width: 2; -fx-border-radius: 25; -fx-background-radius: 25; -fx-padding: 15 20; -fx-font-size: 1.1em; -fx-prompt-text-fill: #6c757d;"/>

                <!-- Boutons d'action modernes -->
                <HBox spacing="10.0" alignment="CENTER">
                    <!-- Bouton emoji (futur) -->
                    <Button text="😊"
                            style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-font-size: 1.5em; -fx-padding: 10;"
                            managed="false"
                            visible="false"/>

                    <!-- Bouton d'envoi moderne -->
                    <Button fx:id="sendButton"
                            text="📤"
                            style="-fx-background-color: #5b5fc7 0%, #667eea 100%; -fx-text-fill: white; -fx-border-radius: 50%; -fx-background-radius: 50%; -fx-font-size: 1.3em; -fx-font-weight: bold; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 4, 0.3, 0, 1);"
                            prefWidth="55.0"
                            prefHeight="55.0"
                            minWidth="55.0"
                            maxWidth="55.0"/>
                </HBox>
            </HBox>
        </VBox>

        <!-- Panneau latéral (futur - participants) -->
        <VBox fx:id="sidePanel"
              prefWidth="320.0"
              style="-fx-background-color: rgba(248, 249, 250, 0.95); -fx-border-color: rgba(0,0,0,0.1); -fx-border-width: 0 0 0 1;"
              managed="false"
              visible="false">

            <padding>
                <Insets top="20.0" bottom="20.0" left="20.0" right="20.0"/>
            </padding>

            <!-- En-tête du panneau -->
            <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-padding: 0 0 20 0;">
                <Label text="👥" style="-fx-font-size: 1.5em;"/>
                <Label text="Participants"
                       style="-fx-font-size: 1.3em; -fx-font-weight: 600; -fx-text-fill: #495057;"/>
            </HBox>

            <!-- Liste des participants (à implémenter) -->
            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                <content>
                    <VBox fx:id="participantsList" spacing="10.0">
                        <!-- Les participants seront ajoutés dynamiquement -->
                    </VBox>
                </content>
            </ScrollPane>

            <!-- Actions du panneau -->
            <VBox spacing="10.0" style="-fx-padding: 20 0 0 0;">
                <Button text="🔗 Copier le lien"
                        style="-fx-background-color: transparent; -fx-text-fill: #5b5fc7; -fx-border-color: #5b5fc7; -fx-border-width: 1; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 10 15;"
                        prefWidth="280.0"/>
                <Button text="⚙️ Paramètres"
                        style="-fx-background-color: transparent; -fx-text-fill: #6c757d; -fx-border-color: #dee2e6; -fx-border-width: 1; -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 10 15;"
                        prefWidth="280.0"/>
            </VBox>
        </VBox>
    </HBox>

    <!-- Barre d'outils inférieure (futur) -->
    <HBox fx:id="toolBar"
          alignment="CENTER"
          spacing="20.0"
          prefHeight="70.0"
          style="-fx-background-color: rgba(52, 58, 64, 0.95); -fx-border-color: rgba(0,0,0,0.2); -fx-border-width: 1 0 0 0;"
          managed="false"
          visible="false">

        <padding>
            <Insets top="15.0" bottom="15.0" left="30.0" right="30.0"/>
        </padding>

        <!-- Boutons de contrôle -->
        <Button text="🎤"
                style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-border-radius: 50%; -fx-background-radius: 50%; -fx-font-size: 1.2em;"
                prefWidth="50.0"
                prefHeight="50.0"/>

        <Button text="📹"
                style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-border-radius: 50%; -fx-background-radius: 50%; -fx-font-size: 1.2em;"
                prefWidth="50.0"
                prefHeight="50.0"/>

        <Button text="📺"
                style="-fx-background-color: #17a2b8; -fx-text-fill: white; -fx-border-radius: 50%; -fx-background-radius: 50%; -fx-font-size: 1.2em;"
                prefWidth="50.0"
                prefHeight="50.0"/>

        <!-- Espacement -->
        <Region HBox.hgrow="ALWAYS"/>

        <!-- Bouton quitter -->
        <Button text="📞 Quitter"
                style="-fx-background-color: #dc3545; -fx-text-fill: white; -fx-border-radius: 25; -fx-background-radius: 25; -fx-font-weight: 600; -fx-padding: 12 25;"
                prefHeight="45.0"/>
    </HBox>

</VBox>